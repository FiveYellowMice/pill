---
layout: default
---

<div class="background-image">
	<a href="{{ site.baseurl }}/images/quincy-take-pill.jpg" target="_blank"><img src="{{ site.baseurl }}/images/quincy-take-pill.jpg" alt="æ¥ï¼Œåƒè¯"></a>
</div>
<div class="content-divider">
	<img class="center site-icon" src="{{ site.baseurl }}/favicon-128.png" alt="è¯ä¸¸">
</div>

<h1 class="center site-title">{{ site.title }}</h1>
<p class="center">{{ site.description }}</p>
<p class="center"><a href="{{ site.baseurl }}/whatisit/">è¿™æ˜¯ä»€ä¹ˆç½‘ç«™ï¼Ÿ</a></p>

<div class="pill-collection">
	{% for pill in site.pills reversed %}
	<div class="pill-card">
		<a href="{{ site.baseurl }}{{ pill.url }}">{{ pill.thing }} è¯ä¸¸ ğŸ’Š {{ pill.title }}</a>
		{{ pill.content }}
	</div>
	{% if forloop.index == 4 %}{% break %}{% endif %}
	{% endfor %}
	<div class="pill-card load-more">
		<div id="load-more-info" class="center"></div>
		<a id="load-more-button" class="center" href="javascript:loadMore()">åŠ è½½æ›´å¤š</a>
		<noscript><p class="center">è¯·å¯ç”¨ JavaScript ä»¥ä½¿ç”¨è¯¥åŠŸèƒ½ã€‚</p></noscript>
	</div>
</div>

<p class="center">ä½¿ç”¨ <a href="{{ site.baseurl }}/feed.xml">RSS</a> è·å–æœ€æ–°åŠ¨æ€ï¼ˆ<a href="https://fiveyellowmice.com/posts/2015/09/usage-of-rss.html">æ€ä¹ˆç”¨ï¼Ÿ</a>ï¼‰</p>
<div class="footer">
	<span>ç”± <a href="https://fiveyellowmice.com/">FiveYellowMice</a> åˆ¶ä½œ</span>
	<a href="{{ site.baseurl }}/copyright.txt">å…¶ä»–äººä½œå“çš„ç‰ˆæƒ</a>
</div>

<script>
	function loadMore() {
		var button = document.getElementById("load-more-button");
		var info = document.getElementById("load-more-info");
		var collection = document.getElementsByClassName("pill-collection")[0];
		var moreBox = document.getElementsByClassName("load-more")[0];

		var request = new XMLHttpRequest();
		request.open("GET", "{{ site.baseurl }}/pills.json", true);
		request.onload = function() {
			if (request.status !== 200) {
				showError("åŠ è½½å¤±è´¥ï¼ŒæœåŠ¡å™¨è¿”å›çŠ¶æ€ç  " + request.status + " ã€‚");
				return;
			}
			try {
				var pillsList = JSON.parse(request.responseText);
			} catch (e) {
				showError("åŠ è½½å¤±è´¥ï¼Œæ— æ³•è§£ææ•°æ®ã€‚");
				return;
			}
			var newPills = pillsList.slice(collection.children.length - 1, collection.children.length + 1);
			//console.log(JSON.stringify(newPills));
			if (newPills.length === 0) {
				showError("æ²¡æœ‰æ›´å¤šäº†ã€‚");
				return;
			}

			newPills.forEach(function(pill) {
				var newElement = document.createElement("div");
				newElement.className = "pill-card";
				newElement.innerHTML = "<a href=\"{{ site.baseurl }}" + pill.url + "\">" + pill.thing + " è¯ä¸¸ ğŸ’Š " + pill.title + "</a>" + pill.content;
				collection.insertBefore(newElement, moreBox);
			});
		}
		request.onerror = function() {
			showError("åŠ è½½å¤±è´¥ï¼Œæ— æ³•è¿æ¥ã€‚");
		}
		request.send();

		function showError(text) {
			button.style.display = "none";
			info.innerHTML = text;
			info.style.display = "block";

			setTimeout(function() {
				info.style.display = "none";
				button.style.display = "";
			}, 2000);
		}
	}
</script>
